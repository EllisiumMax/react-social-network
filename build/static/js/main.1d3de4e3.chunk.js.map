{"version":3,"sources":["components/Messages/Chat/Message/Message.module.scss","redux/loginSelectors.js","redux/authReducer.js","components/Messages/Chat/Chat.module.scss","components/Messages/UserList/User/User.module.scss","components/Navbar/Navbar.module.scss","components/Header/Header.module.scss","images/loader.svg","components/COMMON/Loader/Loader.jsx","components/COMMON/Loader/Loader.module.scss","api/apiDAL.js","components/Header/Login/Login.module.scss","hoc/withAuthRedirect.js","redux/profileReducer.js","images/unknown-user.svg","redux/usersReducer.js","redux/settingsReducer.js","components/Header/Logout/Logout.module.scss","components/Messages/Messages.module.scss","components/Messages/UserList/UserList.module.scss","images/toucan.svg","components/Header/Login/Login.jsx","components/Header/Login/LoginContainer.jsx","components/Header/Logout/Logout.jsx","components/Header/Header.jsx","components/Navbar/Navbar.jsx","redux/messagesReducer.js","redux/messagesSelectors.js","images/viewed.svg","images/not_viewed.svg","components/Messages/Chat/Message/Message.jsx","images/puff_color.svg","components/Messages/Chat/Chat.jsx","images/newMessage.svg","components/Messages/UserList/User/User.jsx","components/Messages/UserList/UserList.jsx","components/Messages/Messages.jsx","components/Messages/MessagesContainer.jsx","redux/appReducer.js","hoc/withSuspense.js","App.js","redux/reduxStore.js","index.js"],"names":["module","exports","getisLoggedSel","state","auth","isLogged","getLogingSel","login","getIsFetchingSel","isFetching","getErrorCodesSel","errorCodes","getErrorMessagesSel","errorMessages","getCaptchaSel","captcha","getUserIdSel","id","LOGIN_REQ","SERVER_ERROR","CAPTCHA","initialState","email","messages","setLogin","type","serverError","code","authRequest","dispatch","DAL","then","res","resultCode","data","loginData","getCaptcha","url","logout","authReducer","action","newState","setTimeout","Loader","fullscreen","className","scss","loaderWrapper","fullScreenLoader","loader","src","alt","axiosSamurai","axios","create","baseURL","withCredentials","headers","security","get","post","delete","users","getUsers","currentPage","usersPerPage","loadPage","page","loadNextPage","nextPage","loadPrevPage","prevPage","subscribeRequest","uNsubscribeRequest","profile","loadProfileInfo","getStatus","setStatus","status","put","uploadPhoto","photo","formData","FormData","append","files","startChating","userId","getAllDialogs","getMessages","count","sendMessage","messageString","JSON","stringify","checkMessageViewed","messageId","markAsSpam","deleteMessage","restoreMessage","filterMessagesByDate","dateString","listOfNewMessages","settings","changeProfileInfo","info","mapStateToProps","withAuthRedirect","Component","AuthComponent","this","props","to","React","connect","ADD_POST","SET_PROFILE_INFO","GET_STATUS","SET_STATUS","REQUEST_IS_FETCHING","UPPLOAD_PHOTO","profileInfo","photos","small","large","posts","imgLink","date","text","likes","addPost","requestIsFetching","boolean","fetching","loadProfile","statusRequest","setStatusRequest","oldStatus","newStatus","length","profileReducer","newPost","push","SET_USERS","SET_SUBSCRIBE","SET_UN_SUBSCRIBE","SET_TOTAL_USERS","SET_CURRENT_PAGE","ADD_FOLLOW_UNFOLLOW_REQUEST","REMOVE_FOLLOW_UNFOLLOW_REQUEST","totalCount","currentRequests","setUsers","setTotalUsers","setCurrentPage","addFollowUnFollowRequest","removeFollowUnFollowRequest","items","targetPage","numberOfPages","Math","ceil","userID","unSubscribeRequest","findUsersReducer","forEach","user","followed","filter","ERROR_ON_SUBMIT","SENT_SUCESSFULLY","IS_FETCHING","HIDE_NOTIFICATIONS","sentSucessfully","window","settingsReducer","Login","loginName","loginBtn","onClick","LoginContainer","Logout","Header","header","toucanLogo","logInOutWrapper","logIn","logOut","Navbar","container","nav","activeClassName","active","SEND_MESSAGE","GET_DIALOGS_LIST","GET_MESSAGES","DELETE_MESSAGE","MARK_SPAM","IS_MESSAGES_FETCHING","isMessagesFetch","userList","targetUserId","messagesReducer","parse","message","el","_","unionWith","a","b","sort","moment","addedAt","getUserListSel","messagesPage","getMessagesSel","getMessagesFetchingSel","Message","time","utc","timeStamp","local","format","useState","menu","showMenu","addEventListener","onContextMenu","e","preventDefault","self","messageWrapper","anotherUser","contextMenu","userName","viewed","isViewed","notViewed","ChatInput","onSubmit","obj","form","friendId","body","reset","blankSpace","scrollIntoView","behavior","block","render","handleSubmit","submitting","inputWindow","name","component","maxLength","placeholder","autoComplete","disabled","Chat","welcomeMessage","useRef","counter","setCounter","useEffect","current","map","i","senderId","loggedId","senderName","mainWrapper","style","display","preload","onScroll","target","scrollTop","chat","ref","User","path","wrapper","avatar","noAvatar","hasNewMessages","newMessagesWrapper","newMessage","newMessagesCount","UserList","c","Messages","chatWrapper","match","params","compose","getDialogs","ammount","console","log","deleteMessageAC","messageID","withRouter","timer","setTimer","timerState","setTimerState","undefined","interval","setInterval","clearInterval","INITIALIZE","appReady","appReducer","withSuspense","fallback","UsersContainer","lazy","LoginWindow","ProfileContainer","SettingsContainer","App","initializeApp","basename","app","rootReducer","combineReducers","profilePage","usersPage","usersReducer","settingsPage","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.1d3de4e3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageWrapper\":\"Message_messageWrapper__36R4N\",\"user\":\"Message_user__-Ob5z\",\"text\":\"Message_text__t46C2\",\"container\":\"Message_container__L4LEP\",\"time\":\"Message_time__2T9dj\",\"self\":\"Message_self__1DcSV\",\"anotherUser\":\"Message_anotherUser__HdIPS\",\"isViewed\":\"Message_isViewed__1bJ0u\",\"contextMenu\":\"Message_contextMenu__3slGW\"};","export const getisLoggedSel = (state) => state.auth.isLogged;\r\n\r\nexport const getLogingSel = (state) => state.auth.login;\r\n\r\nexport const getIsFetchingSel = (state) => state.auth.isFetching;\r\n\r\nexport const getErrorCodesSel = (state) => state.auth.errorCodes;\r\n\r\nexport const getErrorMessagesSel = (state) => state.auth.errorMessages;\r\n\r\nexport const getCaptchaSel = (state) => state.auth.captcha;\r\n\r\nexport const getUserIdSel = (state) => state.auth.id;","import DAL from \"api/apiDAL\";\r\n\r\nconst LOGIN_REQ = \"LOGIN-REQ\";\r\nconst SERVER_ERROR = \"SERVER-ERROR\";\r\nconst CAPTCHA = \"CAPTCHA\";\r\n\r\nconst initialState = {\r\n  isLogged: false,\r\n  id: null,\r\n  login: null,\r\n  email: null,\r\n  messages: [],\r\n  isFetching: false,\r\n  errorMessages: null,\r\n  errorCodes: null,\r\n  captcha: null,\r\n};\r\n\r\nfunction authReducer(state = initialState, action) {\r\n  const newState = { ...state };\r\n  switch (action.type) {\r\n    case LOGIN_REQ:\r\n      newState.isLogged = action.isLogged;\r\n      newState.login = action.login;\r\n      newState.id = action.id;\r\n      newState.email = action.email;\r\n      newState.messages = action.messages;\r\n      return newState;\r\n    case SERVER_ERROR:\r\n      newState.errorMessages = action.messages;\r\n      newState.errorCodes = action.code;\r\n      setTimeout(() => {\r\n        newState.errorMessages = newState.errorCodes = null;\r\n      }, 0);\r\n      return newState;\r\n    case CAPTCHA:\r\n      newState.captcha = action.url;\r\n      setTimeout(() => {\r\n        newState.captcha = newState.errorMessages = newState.errorCodes = null;\r\n      }, 0);\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function setLogin(login, id, email, messages, isLogged) {\r\n  return {\r\n    type: \"LOGIN-REQ\",\r\n    login,\r\n    id,\r\n    email,\r\n    messages,\r\n    isLogged,\r\n  };\r\n}\r\n\r\nexport function serverError(messages, code) {\r\n  return {\r\n    type: SERVER_ERROR,\r\n    messages,\r\n    code,\r\n  };\r\n}\r\n\r\nexport function captcha(url) {\r\n  return {\r\n    type: CAPTCHA,\r\n    url,\r\n  };\r\n}\r\n\r\nexport function authRequest() {\r\n  return (dispatch) => {\r\n    return DAL.auth.authRequest().then((res) => {\r\n      if (res.resultCode === 0) {\r\n        dispatch(\r\n          setLogin(\r\n            res.data.login,\r\n            res.data.id,\r\n            res.data.email,\r\n            res.data.messages,\r\n            true\r\n          )\r\n        );\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function login(loginData) {\r\n  return (dispatch) => {\r\n    DAL.auth.login(loginData).then((res) => {\r\n      if (res.resultCode === 0) {\r\n        authRequest();\r\n        DAL.auth.authRequest().then((res) => {\r\n          if (res.resultCode === 0) {\r\n            dispatch(\r\n              setLogin(\r\n                res.data.login,\r\n                res.data.id,\r\n                res.data.email,\r\n                res.data.messages,\r\n                true\r\n              )\r\n            );\r\n          }\r\n        });\r\n      } else if (res.resultCode === 10) {\r\n        dispatch(serverError(res.messages, res.resultCode));\r\n        DAL.auth.getCaptcha().then((res) => dispatch(captcha(res.url)));\r\n      } else {\r\n        dispatch(serverError(res.messages, res.resultCode));\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  return (dispatch) => {\r\n    DAL.auth.logout().then((res) => {\r\n      if (res.resultCode === 0) {\r\n        dispatch(setLogin(null, null, null, [], false));\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default authReducer;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainWrapper\":\"Chat_mainWrapper__3Zhbm\",\"chat\":\"Chat_chat__3TtEy\",\"welcomeMessage\":\"Chat_welcomeMessage__1IJK3\",\"inputWindow\":\"Chat_inputWindow__3Wr9T\",\"blankSpace\":\"Chat_blankSpace__1F6yl\",\"preload\":\"Chat_preload__2aRqy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"User_wrapper__1wFGK\",\"container\":\"User_container__2D4vm\",\"avatar\":\"User_avatar__2YDBq\",\"active\":\"User_active__1bOFJ\",\"newMessagesWrapper\":\"User_newMessagesWrapper__3NSI8\",\"newMessage\":\"User_newMessage__Qnvzl\",\"newMessagesCount\":\"User_newMessagesCount__2XWU0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Navbar_container__1_ue6\",\"nav\":\"Navbar_nav__3UMRc\",\"active\":\"Navbar_active__1KUtM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1zvcz\",\"logInOutWrapper\":\"Header_logInOutWrapper__3m6Os\"};","export default __webpack_public_path__ + \"static/media/loader.6aaaa7bc.svg\";","import React from \"react\";\r\nimport loader from \"../../../images/loader.svg\";\r\nimport scss from \"./Loader.module.scss\";\r\n\r\nfunction Loader({fullscreen = false}) {\r\n  return (\r\n<div className={scss.loaderWrapper}>\r\n      <img className={fullscreen ? scss.fullScreenLoader : scss.loader} src={loader} alt=\"LOADING...\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderWrapper\":\"Loader_loaderWrapper__3XmWS\",\"loader\":\"Loader_loader__1w7OH\",\"fullScreenLoader\":\"Loader_fullScreenLoader__3H8A5\"};","import axios from \"axios\";\r\n\r\nconst axiosSamurai = axios.create({\r\n  baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n  withCredentials: true,\r\n  headers: {\r\n    \"API-KEY\": \"7bc71dc4-bd30-40b8-a02a-666b7e04e450\",\r\n  },\r\n});\r\n\r\nconst DAL = {\r\n  // DATA ACCESS LAYER\r\n\r\n  security: {},\r\n  auth: {\r\n    authRequest() {\r\n      return axiosSamurai.get(\"auth/me\").then((res) => res.data);\r\n    },\r\n    login(loginData) {\r\n      return axiosSamurai.post(\"auth/login\", loginData).then((res) => res.data);\r\n    },\r\n    logout() {\r\n      return axiosSamurai.delete(\"/auth/login\").then((res) => res.data);\r\n    },\r\n    getCaptcha() {\r\n      return axiosSamurai\r\n        .get(\"/security/get-captcha-url\")\r\n        .then((res) => res.data);\r\n    },\r\n  },\r\n  users: {\r\n    getUsers(currentPage, usersPerPage) {\r\n      return axiosSamurai\r\n        .get(`users?page=${currentPage}&count=${usersPerPage}`)\r\n        .then((res) => res.data);\r\n    },\r\n    loadPage(page, usersPerPage) {\r\n      return axiosSamurai\r\n        .get(`users?page=${page}&count=${usersPerPage}`)\r\n        .then((res) => res.data);\r\n    },\r\n    loadNextPage(nextPage, usersPerPage) {\r\n      return axiosSamurai\r\n        .get(`users?page=${nextPage}&count=${usersPerPage}`)\r\n        .then((res) => res.data);\r\n    },\r\n    loadPrevPage(prevPage, usersPerPage) {\r\n      return axiosSamurai\r\n        .get(`users?page=${prevPage}&count=${usersPerPage}`)\r\n        .then((res) => res.data);\r\n    },\r\n    subscribeRequest(id) {\r\n      return axiosSamurai\r\n        .post(`https://social-network.samuraijs.com/api/1.0/follow/${id}`)\r\n        .then((res) => res.data);\r\n    },\r\n    uNsubscribeRequest(id) {\r\n      return axiosSamurai\r\n        .delete(`https://social-network.samuraijs.com/api/1.0/follow/${id}`)\r\n        .then((res) => res.data);\r\n    },\r\n  },\r\n  profile: {\r\n    loadProfileInfo(id) {\r\n      return axiosSamurai.get(`profile/${id}`).then((res) => res.data);\r\n    },\r\n    getStatus(id) {\r\n      return axiosSamurai.get(`profile/status/${id}`).then((res) => res.data);\r\n    },\r\n    setStatus(status) {\r\n      return axiosSamurai\r\n        .put(\"profile/status\", { status })\r\n        .then((res) => res.data);\r\n    },\r\n    uploadPhoto(photo) {\r\n      const formData = new FormData();\r\n      formData.append(\"image\", photo.files[0]);\r\n      return axiosSamurai\r\n        .put(\"profile/photo\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .then((res) => res.data);\r\n    },\r\n  },\r\n  messages: {\r\n    startChating(userId) {\r\n      return axiosSamurai.put(`dialogs/${userId}`).then((res) => res.data);\r\n    },\r\n    getAllDialogs() {\r\n      return axiosSamurai.get(`dialogs/`).then((res) => res.data);\r\n    },\r\n    getMessages(userId, page = 1, count = 20) {\r\n      return axiosSamurai\r\n        .get(`dialogs/${userId}/messages?page=${page}&count=${count}`)\r\n        .then((res) => res.data);\r\n    },\r\n    sendMessage(userId, messageString) {\r\n      return axiosSamurai\r\n        .post(`dialogs/${userId}/messages`, JSON.stringify(messageString), {\r\n          headers: {\r\n            \"content-type\": \"application/json; charset=utf-8\",\r\n          },\r\n        })\r\n        .then((res) => res.data);\r\n    },\r\n    checkMessageViewed(messageId) {\r\n      return axiosSamurai\r\n        .get(`dialogs/messages/${messageId}/viewed`)\r\n        .then((res) => res.data);\r\n    },\r\n    markAsSpam(messageId) {\r\n      return axiosSamurai\r\n        .post(`dialogs/messages/${messageId}/spam`)\r\n        .then((res) => res.data);\r\n    },\r\n    deleteMessage(messageId) {\r\n      return axiosSamurai\r\n        .delete(`dialogs/messages/${messageId}`)\r\n        .then((res) => res.data);\r\n    },\r\n    restoreMessage(messageId) {\r\n      return axiosSamurai\r\n        .put(`dialogs/messages/${messageId}/restore`)\r\n        .then((res) => res.data);\r\n    },\r\n    filterMessagesByDate(userId, dateString) {\r\n      return axiosSamurai\r\n        .get(`dialogs/${userId}/messages/new?newerThen=${dateString}`)\r\n        .then((res) => res.data);\r\n    },\r\n    listOfNewMessages() {\r\n      return axiosSamurai\r\n        .get(\"dialogs/messages/new/count\")\r\n        .then((res) => res.data);\r\n    },\r\n  },\r\n  settings: {\r\n    changeProfileInfo(info) {\r\n      return axiosSamurai.put(\"profile\", { ...info }).then((res) => res.data);\r\n    },\r\n  },\r\n};\r\n\r\nexport default DAL;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginName\":\"Login_loginName__1xOxy\",\"loginBtn\":\"Login_loginBtn__WqQGl\"};","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { getisLoggedSel, getUserIdSel } from \"redux/loginSelectors\";\r\n\r\nfunction withAuthRedirect(Component) {\r\n  class AuthComponent extends React.Component {\r\n    render() {\r\n      if (!this.props.isLogged) return <Redirect to=\"/login\" />;\r\n      return <Component {...this.props} />;\r\n    }\r\n  }\r\n\r\n  return connect(mapStateToProps, {})(AuthComponent);\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogged: getisLoggedSel(state),\r\n    id: getUserIdSel(state),\r\n  };\r\n}\r\n\r\nexport default withAuthRedirect;\r\n","import DAL from \"api/apiDAL\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_PROFILE_INFO = \"SET-PROFILE-INFO\";\r\nconst GET_STATUS = \"GET-STATUS\";\r\nconst SET_STATUS = \"SET-STATUS\";\r\nconst REQUEST_IS_FETCHING = \"REQUEST-IS-FETCHING\";\r\nconst UPPLOAD_PHOTO = \"UPPLOAD-PHOTO\";\r\n\r\nconst initialState = {\r\n  profileInfo: {\r\n    photos: {\r\n      small: null,\r\n      large: null\r\n    }\r\n  },\r\n  status: \"\",\r\n  posts: [\r\n    {\r\n      imgLink:\r\n        \"https://cdn.pixabay.com/photo/2018/03/31/06/31/dog-3277416__340.jpg\",\r\n      date: \"03.02.2021 12:41\",\r\n      text: \"Hello World\",\r\n      likes: \"25\",\r\n      id: 1,\r\n    },\r\n    {\r\n      imgLink:\r\n        \"https://cdn.pixabay.com/photo/2018/03/31/06/31/dog-3277416__340.jpg\",\r\n      date: \"03.02.2021 12:44\",\r\n      text: \"Hello React\",\r\n      likes: \"125\",\r\n      id: 2,\r\n    },\r\n    {\r\n      imgLink:\r\n        \"https://cdn.pixabay.com/photo/2018/03/31/06/31/dog-3277416__340.jpg\",\r\n      date: \"03.02.2021 12:41\",\r\n      text: \"Hello JavaScript\",\r\n      likes: \"1125\",\r\n      id: 3,\r\n    },\r\n    {\r\n      imgLink:\r\n        \"https://cdn.pixabay.com/photo/2018/03/31/06/31/dog-3277416__340.jpg\",\r\n      date: \"03.02.2021 12:41\",\r\n      text: \"Hello Web\",\r\n      likes: \"23\",\r\n      id: 4,\r\n    },\r\n  ],\r\n  isFetching: false,\r\n};\r\n\r\nfunction profileReducer(state = initialState, action) {\r\n  let newState = { ...state };\r\n  newState.profileInfo = { ...state.profileInfo };\r\n  newState.profileInfo.photos = {...state.profileInfo.photos}\r\n  newState.posts = [...state.posts];\r\n\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      let newPost = {\r\n        imgLink:\r\n          \"https://cdn.pixabay.com/photo/2018/03/31/06/31/dog-3277416__340.jpg\",\r\n        date: action.date,\r\n        text: action.post,\r\n        likes: \"0\",\r\n      };\r\n      newState.posts.push(newPost);\r\n      return newState;\r\n    }\r\n    case SET_PROFILE_INFO: {\r\n      newState.profileInfo = action.profileInfo;\r\n      return newState;\r\n    }\r\n    case REQUEST_IS_FETCHING: {\r\n      newState.isFetching = action.fetching;\r\n      return newState;\r\n    }\r\n    case GET_STATUS: {\r\n      newState.status = action.status;\r\n      return newState;\r\n    }\r\n    case SET_STATUS: {\r\n      newState.status = action.status;\r\n      return newState;\r\n    }\r\n    case UPPLOAD_PHOTO: {\r\n      newState.profileInfo.photos.small = action.small;\r\n      newState.profileInfo.photos.large = action.large;\r\n      return newState;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function addPost(post, date) {\r\n  return {\r\n    type: ADD_POST,\r\n    post,\r\n    date,\r\n  };\r\n}\r\n\r\nexport function setProfileInfo(profileInfo) {\r\n  return {\r\n    type: \"SET-PROFILE-INFO\",\r\n    profileInfo: profileInfo,\r\n  };\r\n}\r\n\r\nexport function requestIsFetching(boolean) {\r\n  return {\r\n    type: \"REQUEST-IS-FETCHING\",\r\n    fetching: boolean,\r\n  };\r\n}\r\n\r\nexport function getStatus(status) {\r\n  return {\r\n    type: GET_STATUS,\r\n    status,\r\n  };\r\n}\r\n\r\nexport function setStatus(status) {\r\n  return {\r\n    type: SET_STATUS,\r\n    status,\r\n  };\r\n}\r\n\r\nexport function photoChanged(photos) {\r\n  return {\r\n    type: UPPLOAD_PHOTO,\r\n    small: photos.small,\r\n    large: photos.large,\r\n  };\r\n}\r\n\r\nexport function loadProfile(id) {\r\n  return (dispatch) => {\r\n    dispatch(requestIsFetching(true));\r\n    DAL.profile.loadProfileInfo(id).then((res) => {\r\n      dispatch(setProfileInfo(res));\r\n      dispatch(requestIsFetching(false));\r\n    });\r\n  };\r\n}\r\n\r\nexport function statusRequest(id) {\r\n  return (dispatch) => {\r\n    DAL.profile.getStatus(id).then((res) => {\r\n      dispatch(getStatus(res));\r\n    });\r\n  };\r\n}\r\n\r\nexport function setStatusRequest(oldStatus, newStatus) {\r\n  return (dispatch) => {\r\n    if (\r\n      oldStatus !== newStatus &&\r\n      newStatus !== \"\" &&\r\n      newStatus.length <= 300\r\n    ) {\r\n      DAL.profile.setStatus(newStatus).then((res) => {\r\n        if (res.resultCode === 0) dispatch(setStatus(newStatus));\r\n      });\r\n    } else dispatch(setStatus(oldStatus));\r\n  };\r\n}\r\n\r\nexport function uploadPhoto(photo) {\r\n  return (dispatch) => {\r\n    DAL.profile.uploadPhoto(photo).then((res) => {\r\n      if (res.resultCode === 0) {\r\n        dispatch(photoChanged(res.data.photos));\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default profileReducer;\r\n","export default __webpack_public_path__ + \"static/media/unknown-user.2a8085fe.svg\";","import DAL from \"api/apiDAL\";\r\n\r\nconst SET_USERS = \"SET-USERS\";\r\nconst SET_SUBSCRIBE = \"SET-SUBSCRIBE\";\r\nconst SET_UN_SUBSCRIBE = \"SET-UN-SUBSCRIBE\";\r\nconst SET_TOTAL_USERS = \"SET-TOTAL-USERS\";\r\nconst SET_CURRENT_PAGE = \"SET-CURRENT-PAGE\";\r\nconst REQUEST_IS_FETCHING = \"REQUEST-IS-FETCHING\";\r\nconst ADD_FOLLOW_UNFOLLOW_REQUEST = \"ADD-FOLLOW-UNFOLLOW-REQUEST\";\r\nconst REMOVE_FOLLOW_UNFOLLOW_REQUEST = \"REMOVE-FOLLOW-UNFOLLOW-REQUEST\";\r\n\r\nconst initialState = {\r\n  users: [],\r\n  totalCount: 0,\r\n  usersPerPage: 8,\r\n  currentPage: 1,\r\n  isFetching: true,\r\n  currentRequests: [],\r\n};\r\n\r\nfunction findUsersReducer(state = initialState, action) {\r\n  let newState = { ...state };\r\n  newState.users = [...state.users];\r\n  newState.currentRequests = [...state.currentRequests];\r\n  switch (action.type) {\r\n    case SET_USERS:\r\n      newState.users = action.users;\r\n      return newState;\r\n    case SET_SUBSCRIBE:\r\n      newState.users.forEach((user) => {\r\n        if (user.id === action.userID) user.followed = true;\r\n      });\r\n      return newState;\r\n    case SET_UN_SUBSCRIBE:\r\n      newState.users.forEach((user) => {\r\n        if (user.id === action.userID) user.followed = false;\r\n      });\r\n      return newState;\r\n    case SET_TOTAL_USERS:\r\n      newState.totalCount = action.totalCount;\r\n      return newState;\r\n    case SET_CURRENT_PAGE:\r\n      newState.currentPage = action.currentPage;\r\n      return newState;\r\n    case REQUEST_IS_FETCHING:\r\n      newState.isFetching = action.isFetching;\r\n      return newState;\r\n    case ADD_FOLLOW_UNFOLLOW_REQUEST:\r\n      newState.currentRequests.push(action.id);\r\n      return newState;\r\n    case REMOVE_FOLLOW_UNFOLLOW_REQUEST:\r\n      newState.currentRequests = newState.currentRequests.filter(\r\n        (id) => id !== action.id\r\n      );\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function setUsers(users) {\r\n  return {\r\n    type: SET_USERS,\r\n    users,\r\n  };\r\n}\r\n\r\nexport function setSubscribe(userID) {\r\n  return {\r\n    type: SET_SUBSCRIBE,\r\n    userID,\r\n  };\r\n}\r\n\r\nexport function setUnSubscribe(userID) {\r\n  return {\r\n    type: SET_UN_SUBSCRIBE,\r\n    userID,\r\n  };\r\n}\r\n\r\nexport function setTotalUsers(totalCount) {\r\n  return {\r\n    type: SET_TOTAL_USERS,\r\n    totalCount,\r\n  };\r\n}\r\n\r\nexport function setCurrentPage(currentPage) {\r\n  return {\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage,\r\n  };\r\n}\r\n\r\nexport function requestIsFetching(boolean) {\r\n  return {\r\n    type: REQUEST_IS_FETCHING,\r\n    isFetching: boolean,\r\n  };\r\n}\r\n\r\nexport function addFollowUnFollowRequest(id) {\r\n  return {\r\n    type: ADD_FOLLOW_UNFOLLOW_REQUEST,\r\n    id,\r\n  };\r\n}\r\n\r\nexport function removeFollowUnFollowRequest(id) {\r\n  return {\r\n    type: REMOVE_FOLLOW_UNFOLLOW_REQUEST,\r\n    id,\r\n  };\r\n}\r\n\r\nexport function getUsers(currentPage, usersPerPage) {\r\n  return (dispatch) => {\r\n    dispatch(requestIsFetching(true));\r\n    DAL.users.getUsers(currentPage, usersPerPage).then((res) => {\r\n      dispatch(requestIsFetching(false));\r\n      dispatch(setUsers(res.items));\r\n      dispatch(setTotalUsers(res.totalCount));\r\n    });\r\n  };\r\n}\r\n\r\nexport function loadPage(targetPage, currentPage, usersPerPage) {\r\n  return (dispatch) => {\r\n    if (targetPage !== currentPage) {\r\n      dispatch(requestIsFetching(true));\r\n      DAL.users.loadPage(targetPage, usersPerPage).then((res) => {\r\n        dispatch(requestIsFetching(false));\r\n        dispatch(setUsers(res.items));\r\n        dispatch(setTotalUsers(res.totalCount));\r\n      });\r\n      dispatch(setCurrentPage(targetPage));\r\n    }\r\n  };\r\n}\r\n\r\nexport function loadNextPage(totalCount, usersPerPage, currentPage) {\r\n  return (dispatch) => {\r\n    const numberOfPages = Math.ceil(totalCount / usersPerPage);\r\n    const nextPage = currentPage + 1;\r\n    if (nextPage <= numberOfPages) {\r\n      dispatch(requestIsFetching(true));\r\n      DAL.users.loadNextPage(nextPage, usersPerPage).then((res) => {\r\n        dispatch(requestIsFetching(false));\r\n        dispatch(setUsers(res.items));\r\n        dispatch(setTotalUsers(res.totalCount));\r\n        dispatch(setCurrentPage(nextPage));\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport function loadPrevPage(currentPage, usersPerPage) {\r\n  return (dispatch) => {\r\n    const prevPage = currentPage - 1;\r\n    if (prevPage >= 1) {\r\n      dispatch(requestIsFetching(true));\r\n      DAL.users.loadPrevPage(prevPage, usersPerPage).then((res) => {\r\n        dispatch(setUsers(res.items));\r\n        dispatch(setTotalUsers(res.totalCount));\r\n        dispatch(requestIsFetching(false));\r\n        dispatch(setCurrentPage(prevPage));\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport function subscribeRequest(id) {\r\n  return (dispatch) => {\r\n    dispatch(addFollowUnFollowRequest(id));\r\n    DAL.users.subscribeRequest(id).then((res) => {\r\n      if (res.resultCode === 0) dispatch(setSubscribe(id));\r\n      dispatch(removeFollowUnFollowRequest(id));\r\n    });\r\n  };\r\n}\r\n\r\nexport function unSubscribeRequest(id) {\r\n  return (dispatch) => {\r\n    dispatch(addFollowUnFollowRequest(id));\r\n    DAL.users.uNsubscribeRequest(id).then((res) => {\r\n      if (res.resultCode === 0) dispatch(setUnSubscribe(id));\r\n      dispatch(removeFollowUnFollowRequest(id));\r\n    });\r\n  };\r\n}\r\n\r\nexport default findUsersReducer;\r\n","import DAL from \"api/apiDAL\";\r\n\r\nconst ERROR_ON_SUBMIT = \"ERROR-ON-SUBMIT\";\r\nconst SENT_SUCESSFULLY = \"SENT-SUCESSFULLY\";\r\nconst IS_FETCHING = \"IS-FETCHING\";\r\nconst HIDE_NOTIFICATIONS = \"HIDE-NOTIFICATIONS\";\r\n\r\nconst initialState = {\r\n  messages: [],\r\n  sentSucessfully: false,\r\n  isFetching: false,\r\n};\r\n\r\nfunction settingsReducer(state = initialState, action) {\r\n  let newState = { ...state };\r\n  newState.messages = [...state.messages];\r\n  switch (action.type) {\r\n    case ERROR_ON_SUBMIT:\r\n      newState.messages = action.messages;\r\n      newState.sentSucessfully = false;\r\n      return newState;\r\n    case SENT_SUCESSFULLY:\r\n      newState.sentSucessfully = true;\r\n      newState.messages = [];\r\n      return newState;\r\n    case IS_FETCHING:\r\n      newState.isFetching = action.boolean;\r\n      return newState;\r\n    case HIDE_NOTIFICATIONS:\r\n      newState.sentSucessfully = false;\r\n      newState.messages = [];\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction submitError(messages) {\r\n  return {\r\n    type: ERROR_ON_SUBMIT,\r\n    messages,\r\n  };\r\n}\r\n\r\nfunction sentSucessfully() {\r\n  return { type: SENT_SUCESSFULLY };\r\n}\r\n\r\nfunction isFetching(boolean) {\r\n  return {\r\n    type: IS_FETCHING,\r\n    boolean,\r\n  };\r\n}\r\nfunction hideNotifications() {\r\n  return {\r\n    type: HIDE_NOTIFICATIONS,\r\n  };\r\n}\r\n\r\nexport function changeProfileInfo(info) {\r\n  return (dispatch) => {\r\n    dispatch(isFetching(true));\r\n    DAL.settings\r\n      .changeProfileInfo(info)\r\n      .then((res) => {\r\n        if (res.resultCode === 0) {\r\n          dispatch(sentSucessfully());\r\n        } else dispatch(submitError(res.messages));\r\n      })\r\n      .then(() => {\r\n        dispatch(isFetching(false));\r\n        window.setTimeout(() => dispatch(hideNotifications()), 5500);\r\n      });\r\n  };\r\n}\r\n\r\nexport default settingsReducer;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logout\":\"Logout_logout__1DQkS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWrapper\":\"Messages_chatWrapper__tzRIL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"UserList_users__2I2wg\"};","export default __webpack_public_path__ + \"static/media/toucan.85b0421a.svg\";","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport scss from \"./Login.module.scss\";\r\n\r\nfunction Login(props) {\r\n  return props.isLogged ? (\r\n    <p className={scss.loginName}>{props.login}</p>\r\n  ) : (\r\n    <NavLink\r\n      to={\"/login\"}\r\n      className={scss.loginBtn}\r\n      onClick={() => props.authRequest()}\r\n    >\r\n      Login\r\n    </NavLink>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { authRequest } from \"redux/authReducer\";\r\nimport {\r\n  getIsFetchingSel,\r\n  getisLoggedSel,\r\n  getLogingSel,\r\n} from \"redux/loginSelectors\";\r\nimport Login from \"./Login\";\r\n\r\nclass LoginContainer extends React.Component {\r\n  render() {\r\n    return <Login {...this.props} />;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogged: getisLoggedSel(state),\r\n    login: getLogingSel(state),\r\n    isFetching: getIsFetchingSel(state),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, { authRequest })(LoginContainer);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"redux/authReducer\";\r\nimport { getisLoggedSel } from \"redux/loginSelectors\";\r\nimport scss from \"./Logout.module.scss\";\r\n\r\nfunction LogoutContainer(props) {\r\n  return props.isLogged ? <Logout {...props} /> : null;\r\n}\r\n\r\nconst Logout = (props) => {\r\n  return (\r\n    <button className={scss.logout} onClick={() => props.logout()}>\r\n      LOG <br /> OUT\r\n    </button>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogged: getisLoggedSel(state),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, { logout })(LogoutContainer);\r\n","import scss from \"./Header.module.scss\";\r\nimport toucanLogo from \"../../images/toucan.svg\";\r\nimport LoginContainer from \"./Login/LoginContainer\";\r\nimport React from \"react\";\r\nimport LogoutContainer from \"./Logout/Logout\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className={scss.header}>\r\n      <img src={toucanLogo} alt=\"toucan\"></img>\r\n      <p>Toucan Social Network</p>\r\n      <div className={scss.logInOutWrapper}>\r\n        <LoginContainer className={scss.logIn} />\r\n        <LogoutContainer className={scss.logOut} />\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport scss from \"./Navbar.module.scss\";\r\n\r\nfunction Navbar() {\r\n  return (\r\n    <div className={scss.container}>\r\n      <nav className={scss.nav}>\r\n        <NavLink to=\"/profile\" activeClassName={scss.active}>\r\n          Profile\r\n        </NavLink>\r\n        <NavLink to=\"/messages\" activeClassName={scss.active}>\r\n          Messages\r\n        </NavLink>\r\n        <NavLink to=\"/users\" activeClassName={scss.active}>\r\n          Users\r\n        </NavLink>\r\n        <NavLink to=\"/settings\" activeClassName={scss.active}>\r\n          Settings\r\n        </NavLink>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import DAL from \"api/apiDAL\";\r\nimport _ from \"lodash\";\r\nimport moment from \"moment\";\r\n\r\nconst SEND_MESSAGE = \"SEND-MESSAGE\";\r\nconst GET_DIALOGS_LIST = \"GET-DIALOGS-LIST\";\r\nconst GET_MESSAGES = \"GET-MESSAGES\";\r\nconst DELETE_MESSAGE = \"DELETE-MESSAGE\";\r\nconst MARK_SPAM = \"MARK-SPAM\";\r\nconst IS_MESSAGES_FETCHING = \"IS-MESSAGES-FETCHING\";\r\n\r\nconst initialState = {\r\n  isMessagesFetch: false,\r\n  userList: [],\r\n  messages: {\r\n    items: [],\r\n  },\r\n  targetUserId: null,\r\n};\r\n\r\nfunction messagesReducer(state = initialState, action) {\r\n  let newState = JSON.parse(JSON.stringify(state));\r\n\r\n  switch (action.type) {\r\n    case SEND_MESSAGE:\r\n      newState.messages.items.push(action.message);\r\n      return newState;\r\n\r\n    case DELETE_MESSAGE:\r\n      newState.messages.items = newState.messages.items.filter(\r\n        (el) => el.id !== action.messageId\r\n      );\r\n      return newState;\r\n\r\n    case MARK_SPAM:\r\n      return newState;\r\n\r\n    case GET_DIALOGS_LIST:\r\n      newState.userList = [...action.users];\r\n      return newState;\r\n\r\n    case GET_MESSAGES:\r\n      if (newState.targetUserId != action.targetUserId) {\r\n        newState.targetUserId = action.targetUserId;\r\n        newState.messages.items = action.messages.items;\r\n      } else {\r\n        newState.messages.items = _.unionWith(\r\n          newState.messages.items,\r\n          action.messages.items,\r\n          (a, b) => a.id == b.id\r\n        ).sort((a, b) => moment(a.addedAt) - moment(b.addedAt));\r\n      }\r\n      newState.messages.totalCount = action.messages.totalCount;\r\n      return newState;\r\n    case IS_MESSAGES_FETCHING:\r\n      newState.isMessagesFetch = action.boolean;\r\n      return newState;\r\n    default:\r\n      return newState;\r\n  }\r\n}\r\n\r\nfunction getAllDialogsAC(users) {\r\n  return {\r\n    type: GET_DIALOGS_LIST,\r\n    users,\r\n  };\r\n}\r\n\r\nfunction getMessagesAC(messages, targetUserId) {\r\n  return {\r\n    type: GET_MESSAGES,\r\n    messages,\r\n    targetUserId,\r\n  };\r\n}\r\n\r\nfunction sendMessageAC(message) {\r\n  return {\r\n    type: SEND_MESSAGE,\r\n    message,\r\n  };\r\n}\r\n\r\nfunction deleteMessageAC(messageId) {\r\n  return {\r\n    type: DELETE_MESSAGE,\r\n    messageId,\r\n  };\r\n}\r\n\r\nfunction markAsSpamAC(messageID) {\r\n  return {\r\n    type: MARK_SPAM,\r\n    messageID,\r\n  };\r\n}\r\n\r\nfunction isFetching(boolean) {\r\n  return {\r\n    type: IS_MESSAGES_FETCHING,\r\n    boolean,\r\n  };\r\n}\r\n\r\nexport function getDialogs() {\r\n  return (dispatch) => {\r\n    DAL.messages.getAllDialogs().then((res) => {\r\n      dispatch(getAllDialogsAC(res));\r\n    });\r\n  };\r\n}\r\n\r\nexport function getMessages(id, page, ammount) {\r\n  return (dispatch) => {\r\n    return DAL.messages.getMessages(id, page, ammount).then((res) => {\r\n      dispatch(getMessagesAC(res, id));\r\n    });\r\n  };\r\n}\r\n\r\nexport function startChating(id) {\r\n  return (dispatch) => {\r\n    dispatch(isFetching(true));\r\n    return DAL.messages\r\n      .startChating(id)\r\n      .then(() => dispatch(isFetching(false)));\r\n  };\r\n}\r\n\r\nexport function sendMessage(userId, text) {\r\n  return (dispatch) => {\r\n    return DAL.messages.sendMessage(userId, text).then((res) => {\r\n      if (res.resultCode === 0) dispatch(sendMessageAC(res.data.message));\r\n    });\r\n  };\r\n}\r\n\r\nexport function deleteMessage(messageId) {\r\n  return (dispatch) => {\r\n    DAL.messages.deleteMessage(messageId).then((res) => {\r\n      console.log(res);\r\n      if (res.resultCode === 0) dispatch(deleteMessageAC(messageId));\r\n    });\r\n  };\r\n}\r\n\r\nexport function markAsSpam(messageId) {\r\n  return (dispatch) => {\r\n    DAL.messages.markAsSpam(messageId).then((res) => {\r\n      console.log(res);\r\n      if (res.resultCode === 0) dispatch(markAsSpamAC(messageId));\r\n    });\r\n  };\r\n}\r\n\r\nexport default messagesReducer;\r\n","export const getUserListSel = (state) => state.messagesPage.userList;\r\n\r\nexport const getMessagesSel = (state) => state.messagesPage.messages;\r\n\r\nexport const getMessagesFetchingSel = (state) =>\r\n  state.messagesPage.isMessagesFetch;\r\n","export default __webpack_public_path__ + \"static/media/viewed.89e68a95.svg\";","export default __webpack_public_path__ + \"static/media/not_viewed.f10d84c9.svg\";","import moment from \"moment\";\r\nimport React, { useState } from \"react\";\r\nimport scss from \"./Message.module.scss\";\r\nimport viewed from \"../../../../images/viewed.svg\";\r\nimport notViewed from \"../../../../images/not_viewed.svg\";\r\n\r\nfunction Message(props) {\r\n  const time = moment\r\n    .utc(props.timeStamp)\r\n    .local()\r\n    .format(\"DD.MM.YYYY, HH:mm:ss\");\r\n\r\n  const [menu, showMenu] = useState(false);\r\n  function toggle() {\r\n    if (menu) showMenu(false);\r\n    else showMenu(true);\r\n  }\r\n  window.addEventListener(\"click\", () => {\r\n    if (menu) showMenu(false);\r\n  });\r\n\r\n  return (\r\n    <div\r\n      onClick={() => {\r\n        showMenu(false);\r\n      }}\r\n      onContextMenu={(e) => {\r\n        e.preventDefault();\r\n        toggle();\r\n      }}\r\n      className={\r\n        props.self\r\n          ? `${scss.messageWrapper} ${scss.self}`\r\n          : `${scss.messageWrapper} ${scss.anotherUser}`\r\n      }\r\n    >\r\n      {menu ? (\r\n        <div className={scss.contextMenu}>\r\n          <p onClick={() => props.deleteMessage(props.id)}>Delete message</p>\r\n          <p onClick={() => props.markAsSpam(props.id)}>Mark as SPAM</p>\r\n        </div>\r\n      ) : null}\r\n      <p className={scss.user}>{props.userName}</p>\r\n      <p className={scss.text}>{props.text}</p>\r\n      <p className={scss.time}>{time}</p>\r\n\r\n      {props.viewed && props.self && (\r\n        <img className={scss.isViewed} src={viewed} alt=\"viewed\"></img>\r\n      )}\r\n      {!props.viewed && props.self && (\r\n        <img className={scss.isViewed} src={notViewed} alt=\"not viewed\"></img>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","export default __webpack_public_path__ + \"static/media/puff_color.54b9c84f.svg\";","import scss from \"./Chat.module.scss\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Message from \"./Message/Message\";\r\nimport { Field, Form } from \"react-final-form\";\r\nimport loader from \"../../../images/puff_color.svg\";\r\n\r\nfunction Chat(props) {\r\n  const messagesPerPage = 20;\r\n  const numberOfPages = Math.ceil(props.messages.totalCount / 20);\r\n\r\n  let messages = <p className={scss.welcomeMessage}>No messages yet..</p>;\r\n  let blankSpace = useRef(null);\r\n\r\n  let [counter, setCounter] = useState(1);\r\n\r\n  useEffect(() => {\r\n    if (blankSpace.current)\r\n      blankSpace.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [props.messages.totalCount]);\r\n\r\n  useEffect(() => {\r\n    if (blankSpace.current)\r\n      blankSpace.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [props.friendId]);\r\n\r\n  function loadPage(e) {\r\n    if (e.target.scrollTop < 1) {\r\n      if (counter < numberOfPages) {\r\n        setCounter(++counter);\r\n        props.getMessages(props.friendId, counter, messagesPerPage);\r\n        e.target.scrollTop = 200;\r\n      } else setCounter(--counter);\r\n    }\r\n  }\r\n\r\n  if (!props.friendId)\r\n    return (\r\n      <div className={scss.welcomeMessage}> Select user to start chat</div>\r\n    );\r\n  if (props.messages.items.length > 0) {\r\n    messages = props.messages.items.map((message, i) =>\r\n      message.senderId !== props.loggedId ? (\r\n        <Message\r\n          key={message.id}\r\n          id={message.id}\r\n          userName={message.senderName}\r\n          text={message.body}\r\n          timeStamp={message.addedAt}\r\n          self={false}\r\n          deleteMessage={props.deleteMessage}\r\n          markAsSpam={props.markAsSpam}\r\n        />\r\n      ) : (\r\n        <Message\r\n          key={message.id}\r\n          id={message.id}\r\n          userName=\"You\"\r\n          text={message.body}\r\n          timeStamp={message.addedAt}\r\n          self={true}\r\n          viewed={message.viewed}\r\n          deleteMessage={props.deleteMessage}\r\n          markAsSpam={props.markAsSpam}\r\n        />\r\n      )\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={scss.mainWrapper}>\r\n      <img src={loader} alt=\"loader\" style={{ display: \"none\" }} />\r\n      {props.isFetching ? (\r\n        <img className={scss.preload} src={loader} alt=\"loader\" />\r\n      ) : (\r\n        <div>\r\n          <div onScroll={(e) => loadPage(e)} className={scss.chat}>\r\n            {messages}\r\n            <div ref={blankSpace} className={scss.blankSpace}></div>\r\n          </div>\r\n          <ChatInput {...props} blankSpace={blankSpace.current} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ChatInput = (props) => (\r\n  <Form\r\n    onSubmit={(obj, form) => {\r\n      if (obj.message) {\r\n        props.sendMessage(+props.friendId, { body: obj.message });\r\n        form.reset();\r\n        if (props.blankSpace)\r\n          props.blankSpace.scrollIntoView({\r\n            behavior: \"smooth\",\r\n            block: \"end\",\r\n          });\r\n      }\r\n    }}\r\n    render={({ handleSubmit, submitting }) => (\r\n      <form onSubmit={handleSubmit}>\r\n        <div className={scss.inputWindow}>\r\n          <Field\r\n            name=\"message\"\r\n            component=\"input\"\r\n            type=\"text\"\r\n            maxLength={5000}\r\n            placeholder=\"Input your message..\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <button disabled={submitting}>SEND</button>\r\n        </div>\r\n      </form>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Chat;\r\n","export default __webpack_public_path__ + \"static/media/newMessage.59d9faef.svg\";","import { NavLink } from \"react-router-dom\";\r\nimport scss from \"./User.module.scss\";\r\nimport noAvatar from \"../../../../images/unknown-user.svg\";\r\nimport newMessage from \"../../../../images/newMessage.svg\";\r\nimport React, { useRef } from \"react\";\r\n\r\nfunction User(props) {\r\n  const path = `/messages/${props.id}`;\r\n\r\n  return (\r\n    <div\r\n      className={scss.wrapper}\r\n      onClick={() => {\r\n        props.startChating(props.id);\r\n        props.getMessages(props.id);\r\n      }}\r\n    >\r\n      <NavLink to={path} activeClassName={scss.active}>\r\n        <div className={scss.container}>\r\n          <img\r\n            className={scss.avatar}\r\n            src={props.photos.small || props.photos.large || noAvatar}\r\n            alt=\"User avatar\"\r\n          />\r\n          <p>{props.userName}</p>\r\n          {props.hasNewMessages ? (\r\n            <div className={scss.newMessagesWrapper}>\r\n              <img\r\n                className={scss.newMessage}\r\n                src={newMessage}\r\n                alt=\"new message\"\r\n              />\r\n              <p className={scss.newMessagesCount}>{props.newMessagesCount}</p>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport User from \"./User/User\";\r\nimport c from \"./UserList.module.scss\";\r\n\r\nfunction UserList(props) {\r\n  let users = props.userList.map((user, i) => (\r\n    <User\r\n      key={`user${i}`}\r\n      {...user}\r\n      getMessages={props.getMessages}\r\n      startChating={props.startChating}\r\n    />\r\n  ));\r\n\r\n  return <div className={c.users}>{users}</div>;\r\n}\r\n\r\nexport default UserList;\r\n","import React from \"react\";\r\nimport Chat from \"./Chat/Chat\";\r\nimport scss from \"./Messages.module.scss\";\r\nimport UserList from \"./UserList/UserList\";\r\n\r\nfunction Messages(props) {\r\n  return (\r\n    <div className={scss.chatWrapper}>\r\n      <UserList\r\n        userList={props.userList}\r\n        getMessages={props.getMessages}\r\n        startChating={props.startChating}\r\n      />\r\n      <Chat\r\n        messages={props.messages}\r\n        sendMessage={props.sendMessage}\r\n        friendId={props.match.params.userId}\r\n        loggedId={props.id}\r\n        deleteMessage={props.deleteMessage}\r\n        markAsSpam={props.markAsSpam}\r\n        getMessages={props.getMessages}\r\n        isFetching={props.isFetching}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Messages;\r\n","import withAuthRedirect from \"hoc/withAuthRedirect\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport { compose } from \"redux\";\r\nimport {\r\n  getDialogs,\r\n  getMessages,\r\n  sendMessage,\r\n  deleteMessage,\r\n  startChating,\r\n  markAsSpam,\r\n} from \"redux/messagesReducer\";\r\nimport {\r\n  getMessagesFetchingSel,\r\n  getMessagesSel,\r\n  getUserListSel,\r\n} from \"redux/messagesSelectors\";\r\nimport Messages from \"./Messages\";\r\nfunction MessagesContainer(props) {\r\n  let [timer, setTimer] = useState(1);\r\n  let [timerState, setTimerState] = useState(true);\r\n\r\n  useEffect(() => {\r\n    props.getDialogs();\r\n    if (props.match.params.userId !== undefined) {\r\n      props.startChating(props.match.params.userId);\r\n      props.getMessages(props.match.params.userId);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTimerState(true);\r\n    let interval = null;\r\n    if (timerState) {\r\n      interval = setInterval(() => {\r\n        setTimer(++timer);\r\n      }, 3000);\r\n    }\r\n    return () => {\r\n      clearInterval(interval);\r\n      setTimerState(false);\r\n    };\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n    props.getDialogs();\r\n    if (props.match.params.userId !== undefined) {\r\n      props.getMessages(props.match.params.userId);\r\n    }\r\n  }, [timer]);\r\n\r\n  return <Messages {...props} />;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    userList: getUserListSel(state),\r\n    messages: getMessagesSel(state),\r\n    isFetching: getMessagesFetchingSel(state),\r\n  };\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {\r\n    getDialogs,\r\n    getMessages,\r\n    sendMessage,\r\n    startChating,\r\n    deleteMessage,\r\n    markAsSpam,\r\n  }),\r\n  withAuthRedirect,\r\n  withRouter\r\n)(MessagesContainer);\r\n","import { authRequest } from \"./authReducer\";\r\n\r\nconst INITIALIZE = \"INITIALIZE\";\r\n\r\nconst initialState = {\r\n  appReady: false,\r\n};\r\n\r\nfunction appReducer(state = initialState, action) {\r\n  const newState = { ...state };\r\n  switch (action.type) {\r\n    case INITIALIZE:\r\n      newState.appReady = true;\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction initializeCompleted() {\r\n  return {\r\n    type: INITIALIZE,\r\n  };\r\n}\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n  dispatch(authRequest()).then(() => dispatch(initializeCompleted()));\r\n};\r\n\r\nexport default appReducer;\r\n","import Loader from \"components/COMMON/Loader/Loader\";\r\nimport React, { Suspense } from \"react\";\r\n\r\nfunction withSuspense(Component, props) {\r\n  return (\r\n    <Suspense fallback={<Loader />}>\r\n      <Component {...props} />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport default withSuspense;\r\n","import React from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport \"./App.scss\";\nimport Header from \"./components/Header/Header\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport MessagesContainer from \"components/Messages/MessagesContainer\";\nimport { connect } from \"react-redux\";\nimport Loader from \"components/COMMON/Loader/Loader\";\nimport { initializeApp } from \"redux/appReducer\";\nimport withSuspense from \"hoc/withSuspense\";\n\nconst UsersContainer = React.lazy(() =>\n  import(\"components/Users/UsersContainer\")\n);\nconst LoginWindow = React.lazy(() =>\n  import(\"components/LoginWindow/LoginWindow\")\n);\nconst ProfileContainer = React.lazy(() =>\n  import(\"components/Profile/ProfileContainer\")\n);\nconst SettingsContainer = React.lazy(() =>\n  import(\"./components/Settings/SettingsContainer\")\n);\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n  render() {\n    if (!this.props.appReady) return <Loader fullscreen={true} />;\n    return (\n      <BrowserRouter basename=\"/toucan/\">\n        <div className=\"app-wrapper\">\n          <Header />\n          <Navbar />\n          <div className=\"app-wrapper-content\">\n            <Route\n              path=\"/profile/:userId?\"\n              render={() => withSuspense(ProfileContainer)}\n            />\n            <Route\n              path=\"/messages/:userId?\"\n              render={() => <MessagesContainer />}\n            />\n            <Route path=\"/users\" render={() => withSuspense(UsersContainer)} />\n            <Route\n              path=\"/settings\"\n              render={() => withSuspense(SettingsContainer)}\n            />\n            <Route path=\"/login\" render={() => withSuspense(LoginWindow)} />\n          </div>\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    appReady: state.app.appReady,\n  };\n};\n\nexport default connect(mapStateToProps, { initializeApp })(App);\n","import profileReducer from \"./profileReducer\";\r\nimport messagesReducer from \"./messagesReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\nimport authReducer from \"./authReducer\";\r\nimport { combineReducers, createStore } from \"redux\";\r\nimport ReduxThunk from \"redux-thunk\";\r\nimport { applyMiddleware } from \"redux\";\r\nimport appReducer from \"./appReducer\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport settingsReducer from \"./settingsReducer\";\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  profilePage: profileReducer,\r\n  messagesPage: messagesReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  app: appReducer,\r\n  settingsPage: settingsReducer,\r\n}); \r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(ReduxThunk))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"App\";\nimport store from \"redux/reduxStore\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}